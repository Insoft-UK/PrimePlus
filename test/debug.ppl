#pragma mode( separator(.,;) integer(h64) )
#define Event key, type[1], x[2], y[3], dx[4], dy[5]
dictionary MouseDown := 0, MouseMove := 1, MouseUp := 2, MouseClick := 3, MouseStretch := 5, MouseRotate := 6, MouseLongClick := 7 EventType;

/// Struct
regex >`\bstruct +([0-9a-z-#,:{}()[\] ]+) +([a-z_]\w*) *;`i\
alias $2:=s__COUNT__;\
local s__COUNT__;\a\
dictionary $1 s__COUNTER__;

/// Switch
regex >`\bswitch +([a-z_.:]+)`i LOCAL sw__SCOPE__ := $1;\aCASE
regex >`\bcase +([^ ]+) +do\b`i IF sw\`__SCOPE__-1` == $1 THEN

function()
begin
    local check := 1.0e-12;
    dictionary Apps := 0, Symb := 1, Up := 2, Help := 3, Esc := 4, Home := 5, Plot := 6, Left := 7, Right := 8, View := 9, Cas := 10, Num := 11, Down := 12, Menu := 13, Vars := 14, Mem := 15, Unit := 16, Xttn := 17, Abc := 18, Bksp := 19, Power := 20, Sin := 21, Cos := 22, Tan := 23, Ln := 24, Log := 25, Sq := 26, Neg := 27, N := 28, Comma := 29, Enter := 30, Eex := 31, 7 := 32, 8 := 33, 9 := 34, Div := 35, Alpha := 36, 4 := 37, 5 := 38, 6 := 39, Mult := 40, Shift := 41, 1 := 42, 2 := 43, 3 := 44, Minus := 45, On := 46, 0 := 47, Dot := 48, Space := 49, Plus := 50 @KeyCode;
    
    struct Event event;
    event = WAIT(-1);
    switch event.type
        // case
        case EventType.MouseMove do
            X := event.x;
            Y := event.y;
        end;
        
        default
        switch event.key
            case KeyCode.Home do
            end;
        end;
    end;
end;

/// For
regex >`\bfor *([^;]+); *([^;]+); *([^;]+) +do\b`i $1;\aWHILE $2 DO__PUSH__`\i$3;\a`
regex >`\bend;`i __POP__END;

function()
begin
    for i=0; i<2; i=i+1 do
        A := A+1;
        B := B - -7;
    end;
end;
regex >`\bauto\b`i\
v__COUNTER__

regex =`^ *\bauto *: *([a-z]\w*)`\
g__COUNTER__:$1

regex `\b([a-zA-Z_]\w*) *\: *([a-zA-Z]\w*(?:::[a-zA-Z]\w*)*)`\
alias $2:=$1;$1

auto : myGlobal := 1;
fnc1: My::Function(p1: argumentOne)
begin
    var auto: i, a: Alpha;
    for i=0; i<2; i=i+1 do
        Alpha := Alpha + 1 * myGlobal * argumentOne;
    end;
    
end;


